<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Insert title here</title>

		<style>
@import "css/itahm.css";

nav {
	position: fixed; top: 10px;
}

nav.rt {
	right: 10px;
}

nav.lt {
	left: 10px;
}

nav input,
nav img {
	vertical-align: middle;
}

nav img {
	cursor: pointer;
}

input, button, label {
	font-size: 9pt;
}

iframe {
	border: none;
	position: fixed; top: 0; right: 0; bottom: 0; left: 0;
	padding: 0;
	margin: 0;
	width: 100%;
	height: 100%;
}

		</style>
	</head>

	<body>
		<iframe src="map2.html"></iframe>
		
		<nav class="lt">
			<img src="img/synchronize.png" width="16px" height="16px" title="synchronize device data" id="device_sync">
			<img src="img/add_device.png" width="16px" height="16px" title="add new device" id="add_device">
			<img src="img/zoomin.png" width="16px" height="16px" title="zoom in" id="zoom_in">
			<img src="img/zoomout.png" width="16px" height="16px" title="zoom out" id="zoom_out">
		</nav>
		
		<nav class="rt">
			<label><input type="checkbox" id="option_interface" checked>interface</label>
 			<label title="show name"><input type="radio" name="option" id="option_name" checked>name</label>
			<label title="show ip address"><input type="radio" name="option" id="option_addr">ip address</label>
		</nav>
		
	</body>
	<script>
	document.getElementById("zoom_in").onclick = function () {
		//zoom(true);
	}
	document.getElementById("zoom_out").onclick = function () {
		//zoom(false);
	}

	document.getElementById("device_sync").onclick = onSync;
	document.getElementById("add_device").onclick = onAddDevice;
	
	document.getElementById("option_name").onchange =
	document.getElementById("option_addr").onchange = function () {
		document.body.classList.toggle("name");
		document.body.classList.toggle("address");
	};
	
	document.getElementById("option_interface").onchange = function () {
		document.body.classList[this.checked? "add": "remove"]("ifname");
	};
	
	function onAddDevice() {
		top.showDialog("device_dialog.html",
			function (dialog) {
				dialog.initialize();
			},
			function () {
				location.reload();
			}
		);
	}
	
	function onSync() {
		if (!confirm("Synchronize device database with agent now?")) {
			return;
		}
		
		top.sendRequest({
			command: "push",
			database: "device",
			sequence: top.databases.device.sequence,
			data: top.databases.device.data
		}, function (response) {
			if (response) {
				top.databases.device.sequence = response.sequence;
			}
			else {
				alert("synchronization failed.");
			}
		});
	}

	</script>
</html>